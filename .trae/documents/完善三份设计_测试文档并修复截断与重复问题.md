先了解项目

## 请求摘要

* 需要完善三份过长而未写完的文档：

  * `e:\xiangmu\DigitalWorkspaceOS\doc\插件系统设计文档.md`

  * `e:\xiangmu\DigitalWorkspaceOS\doc\测试策略文档.md`

  * `e:\xiangmu\DigitalWorkspaceOS\doc\UI 设计文档.md`

* 目标：去重、补全缺失段落、修复格式/代码块错误，使文档结构完整、可读、可交付。

## 现状核查要点

* 插件系统设计文档：

  * 存在整段重复拷贝，从 `doc\插件系统设计文档.md:2645` 开始再次复制开头内容。

  * 代码错误：正则构造行在 `doc\插件系统设计文档.md:1331–1337` 处缺失结束引号与分隔符。

  * 末尾被截断，`PluginHost` 章节在 `doc\插件系统设计文档.md:3568–3569` 处中断。

* 测试策略文档：

  * 从 `doc\测试策略文档.md:1860` 起出现第二份重复内容并逐步截断。

  * `package.json scripts` 段落在 `doc\测试策略文档.md:1860` 附近被截断（`test:integration` 未完成）。

* UI 设计文档：

  * 从 `doc\UI 设计文档.md:2779` 起出现重复副本；末尾在 `doc\UI 设计文档.md:3731` 附近被截断（阴影系统等未完整）。

## 整体处理策略

* 结构对齐：保留已成型的章节结构与术语，统一标题层级与编号。

* 去重与合并：删除重复副本，保留第一份完整上下文；将后续零散片段合并至正确章节。

* 语义补全：依据文档既有风格与术语，补齐被截断的段落与示例；不添加与项目无关内容。

* 格式修复：

  * 统一代码块围栏与语言标注（如 `typescript`、`json`、`css`）。

  * 修复列表与表格的对齐、转义与围栏闭合。

  * 修正示例代码中的语法错误与未闭合标记。

* 可维护性：为长章节添加小节引导语与要点列表，提升可读性。

## 分文档补全计划

### 插件系统设计文档

* 清理与修复：

  * 删除从 `2645` 行开始的重复副本；修正正则构造行（`patternToRegex`）。

  * 完成 `PluginHost` 段落：错误处理、启停/重载流程、插件查询（`getPlugin`）、日志与指标采集。

* 新增/补全章节：

  * 插件状态持久化与迁移（安装、更新、卸载后的数据与权限）。

  * 扩展点清单与贡献点（`contributes`）的完整定义与校验规则。

  * IPC 通道与事件总线清单（含命名规范与负载边界）。

  * 版本兼容与 SemVer 策略、引擎约束、兼容性回退策略。

  * 威胁模型与缓解（沙箱逃逸、权限滥用、资源滥用、RCE）。

  * 性能指标与监控（加载时延、API 响应、内存/CPU 限额、HTTP 限流）。

  * 审计日志与隐私（最小化记录、用户可导出/清理）。

* 校验与收尾：统一示例、关闭所有代码块、补齐“相关文档/版本信息”。

### 测试策略文档

* 清理与修复：删除从 `1860` 行起的重复副本；补全 `package.json` 的测试脚本矩阵（unit/integration/e2e/perf/security）。

* 新增/补全章节：

  * 测试矩阵：操作系统（Win/Mac/Linux）、Node 版本、Electron 版本、GPU 开启/关闭。

  * Flaky 管理：重试策略、隔离原因、稳定性门槛与准入标准。

  * 覆盖率闸门：各层级阈值与 PR 阻塞规则，关键模块更高标准。

  * 测试数据：生成/隔离/清理策略，敏感数据屏蔽与脱敏。

  * 安全测试：权限绕过、沙箱逃逸、HTTP 域白名单、存储配额、XSS/CSRF/SQLi。

  * 性能预算与回归：启动时延、切换时延、批量操作时延、内存占用上限。

  * CI/CD 集成：工件产出、报告归档、失败分类、发布阻塞条件。

* 校验与收尾：统一 Playwright/Spectron 示例、闭合围栏、对齐指标与门槛表。

### UI 设计文档

* 清理与修复：删除从 `2779` 行起的重复副本；补齐在 `3731` 行附近被截断的“阴影系统”等内容。

* 新增/补全章节：

  * 空状态与错误状态规范（信息层级、操作建议、视觉与交互一致性）。

  * 无障碍细化：焦点环、语义标签、对比度实测与示例。

  * 动效准则：进入/退出/组合动效的使用边界与节流原则。

  * 设计 Token 映射到组件的规范示例（按钮、卡片、输入等）。

  * 插件管理 UI 的交互模式与设置面板一致性准则。

* 校验与收尾：对齐配色/间距/圆角/动画系统，闭合所有代码块与示例。

## 实施步骤

1. 逐文档去重与定位截断点，修复明显语法/围栏问题（优先错误行）。
2. 依据现有章节结构按上文所列主题补全内容与示例。
3. 统一术语与格式（标题、列表、代码块语言、表格对齐）。
4. 自检：全文扫描重复、未闭合围栏、引用不一致与断链；校验所有示例可读。
5. 交付：三份文档均达到结构完整、无重复、无截断、格式正确的状态。

## 产出与验收

* 产出：三份修订后的 `.md` 文档（原路径覆盖）。

* 验收：

  * 无重复段落与截断；代码块全部闭合；表格/列表渲染正确。

  * 指标/流程/API/交互描述完整清晰。

  * 与现有项目术语与结构保持一致。

## 请求确认

* 是否按以上计划开始执行修复与补全？确认后我将直接在三份文档中逐项完成并自检。

