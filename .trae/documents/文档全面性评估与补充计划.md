## 请求与范围确认
- 你的要求：在现有基础上新增“纯开发相关”文档，并补齐接口与数据层细节；同时在技术架构文档增补关键章节。
- 本次计划仅聚焦研发文档：IPC/API 接口规范、数据库与数据模型设计；以及在技术架构中新增“错误码与日志规范”和“Electron 安全开发清单”。

## 新增文档（文件与位置）
- `doc/IPC_API_接口规范.md`
- `doc/数据库与数据模型设计.md`

## IPC/API 接口规范（大纲）
- 背景与适用范围（Electron 多进程、Renderer/Main/Preload）
- 命名与版本策略（SemVer、兼容与废弃、通道命名规则）
- 通道枚举（Workspace/Tab/Session/WebView/Plugin 等）
- 请求/响应 Schema（字段、类型、示例、异常结构）
- 错误处理与重试（幂等约定、超时与重试窗口、告警/降级）
- 安全约束（contextBridge、序列化限制、白名单、跨域/CSP）
- 交互序列示例（创建 Workspace、切换、恢复 Tabs、插件激活）

## 数据库与数据模型设计（大纲）
- 目标与范围（SQLite + better-sqlite3，单机持久化）
- ER 图说明（Workspaces、Tabs、Settings/Policies、PluginState）
- 表结构与索引策略（字段类型、唯一性/外键、典型查询）
- 事务与一致性（切换/保存/恢复的原子性、并发模型）
- 迁移与版本化（`schema_version`、增量迁移、回滚策略）
- 备份/恢复与导入/导出（文件级备份、JSON 导出、脱敏字段）

## 现有文档增补（在 `doc/技术架构设计文档.md` 内新增章节）
- 错误码与日志规范：
  - 错误码分层（UI/IPC/主进程/插件）、编号与语义
  - 结构化日志（JSON 字段：level、timestamp、module、correlationId、payload 摘要）
  - 采样与隐私红线（PII 屏蔽、调试开关）
- Electron 安全开发清单：
  - `contextIsolation`、`sandbox`、`nodeIntegration=false`、`preload` 边界
  - WebView 导航拦截与白/黑名单、CSP、协议注册限制
  - 权限最小化与插件沙箱约束（与插件文档互相引用）

## 交叉引用与一致性
- 在新增文档内引用：`doc/技术架构设计文档.md`（模块职责）、`doc/MVP 开发计划.md`（实现步骤）、`doc/插件系统设计文档.md`（插件 API）
- 在技术架构文档中回链：IPC/API 章节指向新文档；存储章节指向数据库设计文档。

## 交付顺序与完成标准
- 顺序：
  - P0：创建两份新增文档并填充首版内容（接口通道+Schema、核心表结构+索引+迁移）
  - P1：在技术架构文档增补两章并建立交叉引用
- 完成标准：
  - 每个通道/接口具备请求与响应示例、错误码映射
  - 每张表具备字段、索引、约束与典型查询；提供迁移与备份流程
  - 技术架构新增章节可直接指导开发与调试、安全审计

请确认以上计划；确认后我将创建两份新增文档并完成首版内容，同时更新技术架构文档的新增章节。