# 参考模块清单（第三方浏览器项目）

> 目标：在不改变我们的安全与架构约束（preload 白名单、contextIsolation/sandbox、IPC 包络/错误码、Workspace 会话隔离）的前提下，按模块吸收优秀设计与交互，提升 UX 与稳定性。

## 候选项目概览（待持续补充）
- Min（轻量浏览器，模糊搜索、极简标签体验）
  - 仓库：https://github.com/minbrowser/min
  - 许可：需二次核验（预计为开源许可）
  - 状态：维护度较好（需以官方仓库为准）
- Wexond（功能较全：标签组、下载、历史、书签、主题、部分扩展支持）
  - 仓库：https://github.com/wexond/desktop
  - 许可与维护：需二次核验
- Biscuit（Web App 聚合，应用分组与图标/颜色 UX）
  - 仓库：https://github.com/agile-league/biscuit（或官网/镜像，需确认）
  - 许可与维护：需二次核验
- Responsively / Polypane（开发者多视口联动思路，非 MVP，但有参考价值）

> 说明：上述条目仅作“方向性参考”，实际使用前需核验仓库地址、许可与维护状态；本清单会随核验更新。

## 可借鉴模块与适配点

### 1. 地址栏（Omnibox）
- 能力：模糊搜索、历史/书签自动补全、错误页跳转。
- 适配：
  - 算法与交互可借鉴；数据源走我们的 `StorageManager` 与 IPC 包络（统一错误码）。
  - 保持 CSP，无内联脚本；渲染层通过打包产物加载。

### 2. 标签交互与分组
- 能力：拖拽排序、关闭动效、相邻激活；标签组与视图布局。
- 适配：
  - 渲染层 DnD 更新顺序 → 调用 `tab.reorder`；持久化由 `StorageManager` 完成。
  - 动效与样式在前端实现，主进程仅负责视图与状态。

### 3. 崩溃与恢复（稳定性）
- 能力：`BrowserView` 崩溃监听、自动恢复到最后 URL、错误页与提示。
- 适配：
  - 主进程监听 `webContents` 事件 → 映射为错误码 → 事件桥传递到 Renderer → Toast 提示/错误页。
  - 恢复策略需与“退出持久化/启动恢复”闭环一致。

### 4. 快捷键体系
- 能力：常用浏览器快捷键（新建/关闭/切换 Tab、切 Workspace、聚焦地址栏）。
- 适配：
  - Windows/Linux 使用 `Ctrl`，macOS 使用 `CommandOrControl`；避免与系统/应用冲突。
  - 热键行为通过我们的白名单 IPC，自研逻辑在主进程（全局）或渲染层（局部）实现。

## 许可与合规（必须执行）
- 使用前核验：开源许可类型（MIT/Apache/GPL 等）、是否允许改造与分发。
- 代码引入方式：优先“思路与交互借鉴”，避免直接复制不兼容许可代码；必要时独立实现。
- 安全约束：不得破坏我们的安全清单（preload 白名单、contextIsolation/sandbox、禁止 Renderer 直连非白名单 IPC）。

## 评估维度与结论输出
- 健康度：最近提交时间、Issue/PR 活跃度、Electron/Node 版本匹配。
- 许可：是否可用于商业/分发场景；是否有附加限制。
- 兼容性：与我们的 IPC 包络/错误码/数据模型的耦合程度与改造成本。
- UX/性能：交互可行性与可维护性、对启动/切换/内存目标的影响。
- 结论模板：
  - 模块：地址栏模糊搜索
  - 来源：Min（链接）
  - 许可：MIT（示例，实际以核验为准）
  - 适配点：算法保留、数据走本地 `StorageManager`；IPC 错误码与 Toast 显示；CSP 合规
  - 风险：依赖更新频率与维护者响应时间
  - 决策：P1 引入（下个迭代）

## 候选优先级（初版）
- P1（近期迭代）：
  - 地址栏建议/历史（Min 思路）
  - 标签拖拽排序与动效（Min/Wexond 思路）
  - 错误页与崩溃恢复（Electron 示例）
- P2（中期迭代）：
  - 标签分组与分栏布局（Wexond/Polypane 思路）
  - 下载/历史/书签（Wexond 思路，需许可核验）

## 执行与验收
- 设计同步：在每个模块实现前，补充“适配点与安全性说明”，并与技术架构文档交叉引用。
- 验收标准：
  - 不破坏安全清单；
  - IPC 包络与错误码一致；
  - 性能目标不退化；
  - 交互稳定、Toast 反馈友好。

---

> 维护说明：本清单为动态文档；每次引入或评估新模块时更新来源链接、许可与适配点，并记录引入决策与落地里程碑。